# Testing Strategy - Individual Stages
# Use this to test each stage independently

control:
  enabled_stages: ["coil_1h"]  # Only test 1h coil detection
  benchmark: false

universe:
  regex: ".*"
  exclude_symbols:
    - EUR/USDT
    - EURI/USDT
    - FDUSD/USDT
    - USD1/USDT
    - USDC/USDT
    - BUSD/USDT
    - TUSD/USDT
    - DAI/USDT

features:
  ema_fast: 21
  ema_mid_fast: 40
  sma_mid_slow: 50
  sma_slow: 150
  atr_window: 14
  slope_window: 100

coil_1h:
  price_col: close
  max_fast3_width_pct: 3.0      # Moderate tightness
  min_bars_in_coil: 8          # Moderate persistence
  max_tr_range_atr: 1.2        # Normal volatility
  min_ma21_slope_pct: -0.1     # Allow slight down

# match_4h:                    # Disabled for testing
#   mode: "either"
#   max_fast3_width_pct: 8.0
#   min_bars_in_coil: 4
#   min_ma21_slope_pct: 0.0
#   min_ma50_slope_pct: 0.0

# confirm_1d:                  # Disabled for testing
#   min_sma150_slope_pct: 0.0
#   tolerance_pct: 0.0

outputs:
  save_watchlists: true
  out_dir: "out"
  rules: ["1h:coil_pass"]
